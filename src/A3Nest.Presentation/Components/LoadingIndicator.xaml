<?xml version="1.0" encoding="utf-8" ?>
<ContentView x:Class="A3Nest.Presentation.Components.LoadingIndicator"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Name="LoadingIndicatorView"
             IsVisible="{Binding Source={x:Reference LoadingIndicatorView}, Path=IsLoading}">
    
    <Grid BackgroundColor="{AppThemeBinding Light=#80FFFFFF, Dark=#80000000}">
        <Border BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundCard}, Dark={StaticResource BackgroundCard}}"
                StrokeShape="RoundRectangle 16"
                Padding="32"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                Shadow="{StaticResource ElevationLG}">
            
            <StackLayout Spacing="16" HorizontalOptions="Center">
                <!-- Modern Loading Animation -->
                <Grid WidthRequest="48" HeightRequest="48" HorizontalOptions="Center">
                    <Ellipse Fill="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                             WidthRequest="48"
                             HeightRequest="48"
                             Opacity="0.2" />
                    
                    <ActivityIndicator IsRunning="{Binding Source={x:Reference LoadingIndicatorView}, Path=IsLoading}"
                                       Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                                       WidthRequest="32"
                                       HeightRequest="32"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center" />
                </Grid>
                
                <!-- Loading Text -->
                <Label Text="{Binding Source={x:Reference LoadingIndicatorView}, Path=LoadingText}"
                       Style="{StaticResource BodyMedium}"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
                
                <!-- Progress Bar (Optional) -->
                <ProgressBar x:Name="LoadingProgressBar"
                             Progress="{Binding Source={x:Reference LoadingIndicatorView}, Path=Progress}"
                             ProgressColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundSecondary}, Dark={StaticResource SurfaceVariant}}"
                             WidthRequest="200"
                             HeightRequest="4"
                             IsVisible="{Binding Source={x:Reference LoadingIndicatorView}, Path=ShowProgress}" />
            </StackLayout>
        </Border>
    </Grid>
</ContentView>