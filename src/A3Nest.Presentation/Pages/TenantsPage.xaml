<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="A3Nest.Presentation.Pages.TenantsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:components="clr-namespace:A3Nest.Presentation.Components"
             xmlns:viewmodels="clr-namespace:A3Nest.Presentation.ViewModels"
             x:DataType="viewmodels:TenantsViewModel"
             x:Name="TenantsPageView"
             Title="{Binding Title}">

    <!-- Root container -->
    <Grid RowDefinitions="Auto,Auto,*,Auto,Auto">

        <!-- Header -->
        <StackLayout Grid.Row="0" Spacing="8" Padding="16">
            <Label Text="Tenant Management"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
            <Label Text="Manage tenant information and relationships"
                   FontSize="16"
                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />
        </StackLayout>

        <!-- Search + Filters -->
        <Grid Grid.Row="1"
              RowDefinitions="Auto,Auto"
              RowSpacing="12"
              Padding="16">

            <!-- Search bar -->
            <SearchBar Placeholder="Search tenants..."
                       Text="{Binding SearchText}"
                       SearchCommand="{Binding SearchCommand}" />

            <!-- Filter controls -->
            <StackLayout Grid.Row="1" Orientation="Horizontal" Spacing="12">
                <Button Text="All" Command="{Binding FilteredTenants}" />
                <Button Text="Active" Command="{Binding SearchCommand}" />
                <Button Text="Inactive" Command="{Binding SearchCommand}" />
            </StackLayout>
        </Grid>

        <!-- Tenant List -->
        <Border Grid.Row="2"
                Stroke="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
                StrokeThickness="1"
                Margin="16"
                Padding="8">
            <Border.StrokeShape>
                <Rectangle />
            </Border.StrokeShape>

            <CollectionView ItemsSource="{Binding Tenants}"
                            SelectionMode="Single"
                            SelectedItem="{Binding SelectedTenant, Mode=TwoWay}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <!--<components:TenantCard />-->
                            
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Border>

        <!-- Search Loading Indicator -->
        <Grid Grid.Row="4"
              IsVisible="{Binding IsSearching}"
              BackgroundColor="Transparent"
              Margin="16,80,16,0">
            <Border Padding="12">
                <Border.Background>
                    <AppThemeBinding Light="{StaticResource White}"
                                     Dark="{StaticResource Gray900}" />
                </Border.Background>
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <AppThemeBinding Light="{StaticResource Gray200}"
                                     Dark="{StaticResource Gray700}" />
                </Border.Stroke>
                <StackLayout Orientation="Horizontal" Spacing="8" VerticalOptions="Center">
                    <ActivityIndicator IsRunning="{Binding IsSearching}" />
                    <Label Text="Searching tenants..."
                           VerticalOptions="Center" />
                </StackLayout>
            </Border>
        </Grid>

        <!-- Full-page Loading Overlay -->
        <Grid IsVisible="{Binding IsLoading}"
              BackgroundColor="Black"
              Opacity="0.5"
              Grid.RowSpan="5" ZIndex="10">
            <ActivityIndicator IsRunning="{Binding IsLoading}"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />
        </Grid>
    </Grid>
</ContentPage>
